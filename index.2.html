<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Hardware Room</title>
  <link rel="stylesheet" type="text/css" media="screen" href="index.css" />
  <script src="https://aframe.io/releases/0.8.2/aframe.min.js"></script>
  <!-- <script src="https://unpkg.com/aframe-environment-component/dist/aframe-environment-component.min.js"></script> -->
  <!-- <script src="https://tonejs.github.io/build/Tone.min.js"></script> -->
  <!-- <script src="//cdn.rawgit.com/donmccurdy/aframe-physics-system/v3.1.1/dist/aframe-physics-system.min.js"></script> -->
  <script src="//cdn.rawgit.com/donmccurdy/aframe-extras/v4.0.2/dist/aframe-extras.min.js"></script>
  <script src="https://unpkg.com/aframe-animation-component@^4.1.2/dist/aframe-animation-component.min.js"></script>

  <!-- <script src="https://unpkg.com/aframe-environment-component/dist/aframe-environment-component.min.js"></script> -->

</head>

<body>



  <!--   <script>
    const synth = new Tone.Synth({
      volume: -12, // the oscillator volume set to -12dB
      oscillator: {
        type: 'square' // oscillator type to square wave
      },
      envelope: {
        attack: 0.02, // envelope attack set to 20ms
        release: 1 // envelope release set to 1s
      }
    }).toMaster() // connect the synth's output to the filter



    // Our customer synth component
    AFRAME.registerComponent('synth', {
      // The schema defines arguments accepted by this component
      schema: {
        // The note / octave
        note: {
          type: 'string',
          default: 'C4'
        },
        // The duration: 8n describes an eighth note
        duration: {
          type: 'string',
          default: '4n'
        }
      },
      init: function () {
        // setup the fusing/hover event listener
        // this.el refers to the entity
        this.el.addEventListener('click', this.trigger.bind(this))
      },
      trigger: function () {
        // trigger a note on the synth
        // this.data refers to the arguments defined
        synth.triggerAttackRelease(this.data.note, this.data.duration)
      },
      update: function () { },
      tick: function () { },
      remove: function () { },
      pause: function () { },
      play: function () { }
    })


  </script>

  <script>

    const fan = new Tone.Synth({
      volume: -15, // the oscillator volume set to -12dB
      oscillator: {
        frequency: 24, // oscillator type to square wave
      },
      envelope: {
        attack: 5,
        decay: 2,
        sustain: 1,
        release: 1
      }
    }).toMaster() // connect the synth's output to the filter

    const noise = new Tone.Noise({
      type: "pink",
      volume: -33,
      fadeIn: "+5",
    })


    // fan.connect(noise)

    const autoFilter = new Tone.AutoFilter({
      "frequency": "8m",
      "min": 600,
      "max": 700
    }).toMaster()

    noise.connect(autoFilter)
    fan.triggerAttack(24, "+0.5");
    noise.start()








    // fan.chain(noise)

    // fan.triggerAttack(24, "+1");
/*     const ventilator = new Tone.Part(function (time) {
      fan.triggerAttack(24, time, 0.5);
      noise.start()
    }).start("+1")

    Tone.Buffer.onload = () => {
      Tone.Transport.start("+0.1");
    } */
    /*     const ventilator = new Tone.Part(function (time) {
          fan.triggerAttack(time);
          // noise.start()
        }, "2n").start(0) */


    // fan.start(); 

    /*     const ventilator = new Tone.Part(function(time) {
      fan.triggerAttack(time);
    }) */

    // const loop = new Tone.Sequence()
    // Our customer synth component
/*     AFRAME.registerComponent('ventilator', {
      // The schema defines arguments accepted by this component
      schema: {
        // The note / octave
        note: {
          type: 'string',
          default: 'C4'
        },
        // The duration: 8n describes an eighth note
        duration: {
          type: 'string',
          default: '4n'
        }
      },
      init: function () {
        // setup the fusing/hover event listener
        // this.el refers to the entity
        this.el.addEventListener('click', this.trigger.bind(this))
      },
      trigger: function () {
        // trigger a note on the synth
        // this.data refers to the arguments defined
        synth.triggerAttackRelease(this.data.note, this.data.duration)
      },
      update: function () { },
      tick: function () { },
      remove: function () { },
      pause: function () { },
      play: function () { }
    }) */ -->




  <a-scene sound="src: url(./assets/audio/ambience/room-tone.mp3); loop:true; autoplay:true; volume:0.5; positional: false">
    <a-assets>

      <!-- // MODELS -->
      <a-asset-item id="comp-obj" src="./models/computer.obj"></a-asset-item>
      <a-asset-item id="comp-mtl" src="./models/computer.mtl"></a-asset-item>
      <a-asset-item id="chair-obj" src="./models/chair.obj"></a-asset-item>
      <a-asset-item id="chair-mtl" src="./models/chair.mtl"></a-asset-item>
      <a-asset-item id="wall-obj" src="./models/wall_01.obj"></a-asset-item>
      <a-asset-item id="wall-mtl" src="./models/wall_01.mtl"></a-asset-item>

      <!-- <video id="processing" autoplay loop="true" src="./assets/processing.mp4"></video> -->


      <!-- // AUDIO FILES -->
      <audio id="computer-startup" src="./assets/audio/sfx/computer-startup.mp3"></audio>
      <!-- <audio id="background" src="./assets/audio/ambience/room-tone.mp3"></audio> -->
      <audio id="beep" src="./assets/audio/sfx/short_beep01.mp3"></audio>
      <audio id="beep-loop" src="./assets/audio/sfx/beep_loop01.mp3"></audio>
      <audio id="beep-loop2" src="./assets/audio/sfx/beep_loop02.mp3"></audio>
      <audio id="beep2" src="./assets/audio/sfx/short_beep03.mp3"></audio>
      <audio id="beep3" src="./assets/audio/sfx/short_beep07.mp3"></audio>
      <audio id="dot-matrix" src="./assets/audio/sfx/dot_matrix.mp3"></audio>



    </a-assets>

    <a-entity>
      <a-entity obj-model="obj: #comp-obj; mtl: #comp-mtl" position="-5 0.1 -5" rotation="0 -90 0" scale="0.25 0.25 0.25">
        <!-- Computer Startup -->
        <a-box material="opacity: 0" scale="3.6 3.6 3.6" position="1.7 5.4 -17.4" sound="src: #computer-startup; volume: 0.8; on: click"></a-box>


        <!-- Dot Matrix Printer -->
        <a-box material="opacity:0" scale="4.7 4.3 4.2" position="8.8 3.03 -0.9" sound="src: #dot-matrix; volume: 0.6; on: click"></a-box>


        <!-- BEEPS -->
        <!-- <a-entity sound="src: #beep-loop; autoplay: true; loop: true; volume: 0.3" position="-5.2 5.37 0.4"></a-entity> -->
        <a-entity sound="src: #beep-loop; autoplay: true; loop: true; volume: 0.6" position="-12.363 5.37 -3.511"></a-entity>
        <!-- <a-entity sound="src: #beep-loop2; autoplay: true; loop: true; volume: 0.3" position="-10 6 0.8"></a-entity> -->
        <a-entity sound="src: #beep-loop2; autoplay: true; loop: true; volume: 0.6" position="-13.477 6 -8.97"></a-entity>

      </a-entity>



      <!--     <a-sound src="src: #beep" autoplay="true" position="0 2 5" loop="true"></a-sound>
      <a-sound src="src: #beep2" autoplay="true" position="5 2 5" loop="true"></a-sound>
      <a-sound src="src: #beep3" autoplay="true" position="-5 2 5" loop="true"></a-sound> -->

      <!-- BACKGROUND AMBIENCE -->
      <!-- <a-entity id="ambience" sound="src: #background; loop: true; volume:0.5; positional: false"></a-entity> -->
      <!-- <a-sound src="#background" autoplay="true" positional="false" loop="true" volume="0.4"></a-sound> -->


      <a-entity obj-model="obj: #chair-obj; mtl: #chair-mtl" position="-1.3 0.1 -2.425" rotation="-90 125 0" scale="1.5 1.5 1.5"></a-entity>

      <a-entity obj-model="obj: #comp-obj; mtl: #comp-mtl" position="4 0.1 -8.3" rotation="0 180 0" scale="0.25 0.25 0.25"></a-entity>
      <!-- <a-entity obj-model="obj: #chair-obj; mtl: #chair-mtl" position="2.65 0.1 -3.32" rotation="-90 90 0" scale="1.5 1.5 1.5"></a-entity> -->
    </a-entity>

    <a-entity position="2.343 0 -1.369" rotation="0 180.023 0">
      <a-entity obj-model="obj: #comp-obj; mtl: #comp-mtl" position="-5 0.1 -5" rotation="0 -90 0" scale="0.25 0.25 0.25">
        <a-box material="opacity: 0" scale="3.610236550964652 3.610236550964652 3.610236550964652" position="1.7722584007818938 5.458216786045342 -17.48730782945859"
          sound="src: #computer-startup; volume: 0.5; on: click"></a-box>

      </a-entity>
      <a-entity obj-model="obj: #comp-obj; mtl: #comp-mtl" position="4 0.1 -8.3" rotation="0 180 0" scale="0.25 0.25 0.25"></a-entity>
      <a-entity obj-model="obj: #chair-obj; mtl: #chair-mtl" position="-1.3 0.1 -2.425" rotation="-90 125 0" scale="1.5 1.5 1.5"></a-entity>
      <a-entity obj-model="obj: #chair-obj; mtl: #chair-mtl" position="2.65 0.1 -3.32" rotation="-90 90 0" scale="1.5 1.5 1.5"></a-entity>
    </a-entity>


    <a-entity id="rig" movement-controls>
      <a-entity camera position="0 1.8 0" look-controls="pointerLockEnabled: true">
        <!-- <a-sound src="#background" autoplay="true" position="0 0 0" loop="true" volume="0.05"></a-sound> -->
        <a-cursor></a-cursor>
        <!--   <a-entity cursor="fuse: true;"
        position="0 0 -3"
        geometry="primitive: ring"
        material="color: black; shader: flat">
<a-animation begin="click" easing="ease-in" attribute="scale" dur="150"
             fill="forwards" from="0.1 0.1 0.1" to="1 1 1"></a-animation>
<a-animation begin="cursor-fusing" easing="ease-in" attribute="scale" dur="1500"
             fill="backwards" from="1 1 1" to="0.1 0.1 0.1"></a-animation>
</a-entity> -->
      </a-entity>
    </a-entity>



    <a-plane color="black" rotation="-90 0 0" position="0 0.1 0" width="20" height="20">

    </a-plane>
    <!-- <a-video src="#processing" width="16" height="9" position="0 0 -20"></a-video> -->
    <!--    <a-video src="#processing" width="16" height="9" position="-0.711 1.668 -3.339" scale="0.02 0.03 0.01"></a-video> -->
    <!-- 
    <a-video src="#processing" width="16" height="9" position="-0.524 1.552 -4.091"></a-video> -->

    <!--    <a-entity geometry="primitive: box" material="color: orange" position="0 6.5 -7" animation__fadein="property: material.opacity; dur: 100;
                        easing: linear; from 0; to: 1; startEvents: fadein" animation__fadeout="property: material.opacity; dur: 100;
                        easing: linear; from 1; to: 0; startEvents: fadeout"></a-entity> -->

    <a-sky color="grey"></a-sky>

    <!-- WALLS -->
    <!--     <a-entity>
      <a-entity obj-model="obj: #wall-obj; mtl: #wall-mtl" position="-3.75 0.023 -9.953" rotation="270 0 0" scale="0.01 0.01 0.01"></a-entity>
      <a-entity obj-model="obj: #wall-obj; mtl: #wall-mtl" position="-1.553 0.023 -9.953" rotation="270 0 0" scale="0.01 0.01 0.01"></a-entity>
      <a-entity obj-model="obj: #wall-obj; mtl: #wall-mtl" position="0.685 0.023 -9.953" rotation="270 0 0" scale="0.01 0.01 0.01"></a-entity>
      <a-entity obj-model="obj: #wall-obj; mtl: #wall-mtl" position="2.921 0.023 -9.953" rotation="270 0 0" scale="0.01 0.01 0.01"></a-entity>
      <a-entity obj-model="obj: #wall-obj; mtl: #wall-mtl" position="5.148 0.023 -9.953" rotation="270 0 0" scale="0.01 0.01 0.01"></a-entity>
      <a-entity obj-model="obj: #wall-obj; mtl: #wall-mtl" position="7.407 0.023 -9.953" rotation="270 0 0" scale="0.01 0.01 0.01"></a-entity>
      <a-entity obj-model="obj: #wall-obj; mtl: #wall-mtl" position="9.621 0.023 -9.953" rotation="270 0 0" scale="0.01 0.01 0.01"></a-entity>
      <a-entity obj-model="obj: #wall-obj; mtl: #wall-mtl" position="11.827 0.023 -9.953" rotation="270 0 0" scale="0.01 0.01 0.01"></a-entity>
      <a-entity obj-model="obj: #wall-obj; mtl: #wall-mtl" position="13.966 0.023 -9.953" rotation="270 0 0" scale="0.01 0.01 0.01"></a-entity>
    </a-entity> -->

    <!-- 
    <rw-room position="-2 0 -2" material="color:#866">
      <rw-wall position="4 0 0"></rw-wall>
      <rw-wall position="4 0 4"></rw-wall>
      <rw-wall position="0 0 4"></rw-wall>
      <rw-wall position="0 0 0">
        <rw-doorhole id="holeA"></rw-doorhole>
        <rw-doorlink from="#holeA" to="#holeB" position="2.5 0 0"></rw-doorlink>
      </rw-wall>
    </rw-room>
    <rw-room position="0 0 -3">
      <rw-wall position=" 1 0 -1" material="color:#787"></rw-wall>
      <rw-wall position=" 1 0  1" material="color:#877">
        <rw-doorhole id="holeB"></rw-doorhole>
      </rw-wall>
      <rw-wall position="-1 0  1" material="color:#878"></rw-wall>
      <rw-wall position="-1 0 -1" material="color:#778"></rw-wall>
    </rw-room> -->
  </a-scene>

</body>


</html>